<div class="container">
  <!-- <h3 style="margin-top: 2rem; text-align: center;" class=" as">Оформити замовлення</h3> -->
  <div class="row">
    <div class="col-lg-12 mt-5" *ngIf="orders.length > 0">
      <div class="row">
        <div class="col-lg-12 col-lg-push-6 col-my-lt-12">
          <div class="payItems smallSlideLeft animationDelay-1">
            <div class="table">
              <div class="tr thead">
                <div class="tr nav">
                  <div class="td"></div>
                  <div class="td">Товар</div>
                  <div class="td">Ціна</div>
                  <div class="td">Кількість</div>
                  <div class="td">Загалом</div>
                </div>
              </div>
              <div class="tr tbody">
                <div class="tr productOrder" *ngFor="let order of orders">
                  <div class="td">
                    <div class="delateProduct remove-cart-product-popup open-popup" (click)="deletApple(order)">
                    </div>
                  </div>
                  <div class="td " >
                    <div class="smallProduct">
                      <a class="imgWrapper" [style.backgroundImage]="'url('+ order.img +')'"></a>
                      <div class="smallProductInfo">
                        <h6 class="h6 as"><a> {{order.categoryProduct}} {{order.memory}} {{order.color}} </a>
                        </h6>
                        <p></p>
                      </div>
                    </div>
                  </div>
                  <div class="td count">
                    <div class="singleItemPrice">
                      <b> $<span style="text-align: center;">{{order.price / order.dollarPrice|fixed | kyrs}}</span>
                      </b>
                      <br>
                      <span>{{order.price | currency}} грн</span>
                    </div>
                  </div>
                  <div class="td count">
                    <div class="productCountWrapper">
                      <span class="productCount lessProduct" (click)="productCount(order,false)"></span>
                      <input class="product-qty" maxlength="3" type="text" [value]="order.count">
                      <span class="productCount moreProduct update-cart-product"
                        (click)="productCount(order,true)"></span>
                    </div>
                  </div>
                  <div class="td count ">
                    <div class="itemPrice productPrice">
                      <b class="tableMobTitle">Загалом: </b><span> $
                        {{order.count * order.price / order.dollarPrice | fixed | kyrs}}</span>
                      <br>
                      <b class="tableMobTitle">Загалом: </b><span> {{order.count * order.price | kyrs}}</span><i>грн</i>
                    </div>
                  </div>
                </div>
              </div>
              <div class="tr tfoot">
                <div class="td">
                  <div class="fullPrice cart-total">
                    <div class="subFullPrice" style="display:none;">
                      <span>299</span>
                      <i>грн</i>
                    </div>
                    <div class="totalFullPrice" style="display:block;">
                      <p>Загалом:</p>
                      <i>$</i>
                      <span>{{totalPrice |fixed |kyrs }}</span>
                      <br>
                      <span>{{totalUk | kyrs}}</span>
                      <i>грн</i>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>




  <form (ngSubmit)="addOrder(formGroup.value)" [formGroup]="formGroup" class="example-form">
    <div class="row-block ">
      <div class="width">
        <div class="payItems smallSlideLeft animationDelay-1 pading">
          <h6 class="h6">Контактна інформація</h6>
          <div class="row">
            <div class="col-6 form-group">

              <mat-form-field class="example-full-width">
                <mat-label>Ім*я *</mat-label>
                <input type="text" formControlName='name' matInput name="price">
              </mat-form-field>
            </div>
            <div class="col-6 form-group">
              <mat-form-field class="example-full-width">
                <mat-label>Прізвище *</mat-label>
                <input type="text" formControlName='lastName' matInput name="price">
              </mat-form-field>
            </div>
          </div>
          <div class="row">
            <div class="col-6 form-group">
              <mat-form-field class="example-full-width">
                <mat-label>Telephone *</mat-label>
                <span matPrefix>+380 &nbsp;</span>
                <input type="tel" formControlName='number' matInput placeholder="__-__-___">
              </mat-form-field>
            </div>
            <div class="col-6 form-group">
              <mat-form-field class="example-full-width">
                <mat-label>Email</mat-label>
                <input type="email" formControlName='email' matInput name="price">
              </mat-form-field>

            </div>
          </div>

        </div>
        <div class="payItems smallSlideLeft animationDelay-1 pading">
          <h6 class="h6">Доставка</h6>
          <div class="checkout-step.step-shipping">
            <ul class="checkout-options shipping cartOS__form mara">
              <li class="shipping-1" (click)="activeItem('1')" [class.shipping_active]="active == '1' "><label>
                  <h3><img src="../../../assets/images/delivery/placeholder (1).svg" class="method-logo"><br><input
                      type="radio" name="shipping_id" value="1" checked="">Отримати в магазині</h3>
                  <div class="rate"><span class="price2 nowrap">Безкоштовно</span><span class="price nowrap"></span>
                  </div>
                </label></li>
              <li class="shipping-9" (click)="activeItem('2')" [class.shipping_active]="active == '2' "><label>
                  <h3>
                    <img src="../../../assets/images/delivery/kurr.svg" class="method-logo">
                    <br>
                    <input type="radio" name="shipping_id" value="9">Кур'єрська доставка (Львів)
                  </h3>
                  <div class="rate"><span class="price2 nowrap">Безкоштовно</span><span class="price nowrap"></span>
                  </div>
                </label></li>
              <li class="shipping-3" (click)="activeItem('3')" [class.shipping_active]="active == '3' "><label>
                  <h3><img src="../../../assets/images/delivery/np-icon.webp" class="method-logo"><br><input
                      type="radio" name="shipping_id" value="3">Нова Пошта</h3>
                      <div class="rate"><span class="price2 nowrap">Від 50 грн</span><span class="price nowrap"></span>
                
                  </div>
                </label></li>

            </ul>
          </div>
          <span [ngSwitch]="active">
            <div *ngSwitchCase="'3'">
              <app-maps-nova [form]="formGroup"></app-maps-nova>
            </div>
            <div *ngSwitchCase="'2'">
              <div class="cartOS__shipList shipping-9" style="display: block;">
                <div class="rate"><em class="hint error comment" style="display:none"><br></em></div>
                <div class="cartOS__shipVariants"><input type="hidden" name="rate_id[9]" value="delivery"></div>
                <p>Можлива по м. Львів. Доставка безкоштовна. Оплата здійснюється при отриманні товару. </p>
                <div class="wa-form wa-address">
                  <div class="wa-field wa-field-address wa-field-address-shipping">
                    <div class="wa-name">Адреса</div>
                    <div class="wa-value">
                      <p>
                        <mat-form-field>
                          <mat-label>Номер будинку (та квартири)</mat-label>
                          <input matInput formControlName='adress'>
                        </mat-form-field>
                        <!-- <button (click)="addOrder()" class="btn btn-primary" type="button">Text</button> -->
                            <input type="hidden" name="customer_9[address.shipping][region]" value="14">
                          <input type="hidden" name="customer_9[address.shipping][country]" value="ukr"></p>
                    </div>
                  </div><input type="hidden" name="_csrf" value="">
                </div>
              </div>
            </div>
            <p *ngSwitchCase="'1'">
              <app-maps class="map" [form]="formGroup"> </app-maps>
            </p>
          </span>

        </div>
      </div>



      <div class="cartOS__right">
        <div class="cartOS__info" style="position: relative; top: 0px;">
          <h2 class="cartOS__title">Ваше замовлення</h2>
          <div class="cartOS__table">
            <table>
              <tbody>
                <tr *ngFor="let order of orders">
                  <td class="cartOS__tableImg">
                    <img alt="Apple iPhone 12 64GB White" title="Apple iPhone 12 64GB White" [src]="order.img">
                  </td>
                  <td>
                    <h3>{{order.categoryProduct}} {{order.memory}} {{order.color}}</h3>
                    <div class="cartOS__tablePrice">${{order.price / order.dollarPrice|fixed | kyrs}} × {{order.count}}
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
          <div class="cartOS__infoBl">
            <div class="cartOS__bl">
              <div>Доставка — <img class="cartOS__dopIcon" src="" alt=""> Отримати в магазині</div>
            </div>
            <div class="cartOS__total">
              <div class="cartOS__total-title">Всього</div>
              <div class="cartOS__total-price">${{totalPrice |fixed |kyrs }}<br><span class="small">{{totalUk | kyrs}}
                  грн.</span></div>
            </div>
            <button [disabled]="formGroup.invalid" type="submit"
              class="cartOS__button wa-button button btn button_primary" value="Оформити замовлення" >Оформити замовлення
            </button>
          </div>
        </div>
      </div>
    </div>

  </form>
</div>
